# 2022-01-21	字符串和内存函数(2)

## 1. `strtok`

```C
char * strtok ( char * str, const char * sep );
```

作用：将字符串分割成一个个片段（自己设定分隔符）

- `sep`参数是个字符串，定义了用作分隔符的字符集合第一个参数指定一个字符串，它包含了0个或者多个由`sep`字符串中一个或者多个分隔符分割的标记。

- `strtok`函数找到`str`中的下一个标记，并将其用 `\0` 结尾，返回一个指向这个标记的指针。（注：`strtok`函数会改变被操作的字符串，所以在使用`strtok`函数切分的字符串一般都是临时拷贝的内容并且可修改。）

- `strtok`函数的第一个参数不为 `NULL` ，函数将找到`str`中第一个标记，`strtok`函数将保存它在字符串中的位置。

- `strtok`函数的第一个参数为 `NULL `，函数将在同一个字符串中被保存的位置开始，查找下一个标记。如果字符串中不存在更多的标记，则返回 `NULL` 指针。

  >即:	1. `strtok`函数在使用的时候，因为会改变参数，所以第一个参数需要是目标参数的临时拷贝
  >
  >2. `strtok`函数在找第一个标记的时候，函数的第一个参数不是`NULL`
  >
  >3. `strtok`函数在找非第一个标记的时候，函数的第一个参数不是`NULL`
  >
  >例：
  >
  >```c
  >const char* p = "@.";
  >char arr[] = "July3@blog.csdn.net";
  >char arr_copy[50] = { 0 };
  >strcpy(arr_copy, arr);
  >char* str = NULL;
  >for(str = strtok(buf, p); str != NULL; str = strtok(NULL, p))
  >{
  >    printf("%s\n", str);
  >}
  >```
  >

## 2. `strerror`

```c
char * strerror ( int errnum );
```

作用：返回错误码，所对应的错误信息。

>```c
>int main()
>{
>    int i = 0;
>    for(int i = 0; i < 10; i++)
>        printf(" %s\n", strerror(i));
>    
>    return 0;
>}
>// 此段代码可测试输出各错误码表示的错误信息
>```
>
>实际操作：
>
>在执行某些操作时，可能会遇到一些错误，这时候就需要到这个函数了
>
>例如：C语言操作文件时，遇到错误时
>
>```c
>// fopen 函数可以操作文件(返回值，参数，头文件等具体问题，看MSDN)
>// 当库函数使用错误时，会将 errno(C语言提供的全局变量,可直接使用, 需要头文件 errno.h) 赋值为此次库函数使用错误时的错误码
>#include <errno.h>
>
>int main()
>{
>    //打开文件
>    FILE* pf = fopen("july3.txt", "r");
>    if(NULL == pf)
>    {
>        printf("%s\n", strerror(errno));
>        return 0;
>    }
>    //读文件
>    
>    //关闭文件
>    fclose(pf);
>    pf = NULL;
>    
>    return 0;
>}
>```

## 3. 字符分类、字符转换函数

| 字符分类函数 |               如果他的参数符合下列条件就返回真               |
| :----------: | :----------------------------------------------------------: |
|  `iscntrl `  |                         任何控制字符                         |
|  `isspace `  | 空白字符：空格`' '`，换页`'\f'`，换行`'\n'`，回车`'\r'`，制表符`'\t'`或者垂直制表符 `'\v'` |
|  `isdigit `  |                        十进制数字 0~9                        |
| `isxdigit `  | 十六进制数字，包括所有十进制数字，小写字母`a~f`，大写字母`A~F` |
|  `islower `  |                        小写字母`a~z`                         |
|  `isupper `  |                        大写字母`A~Z`                         |
|  `isalpha `  |                       字母`a~z`或`A~Z`                       |
|  `isalnum `  |               字母或者数字，`a~z`,`A~Z`,`0~9`                |
|  `ispunct `  |     标点符号，任何不属于数字或者字母的图形字符（可打印）     |
|  `isgraph `  |                         任何图形字符                         |
|  `isprint `  |            任何可打印字符，包括图形字符和空白字符            |

| 字符转换函数 |        作用        |
| :----------: | :----------------: |
|  `tolower`   | 大写字母转小写字母 |
|  `toupper`   | 小写字母转大写字母 |

## 4.`memcpy`

```c
void * memcpy ( void* destination, const void* source, size_t num);
```

作用：`strcpy` 是用来拷贝字符串的，`memcpy` 也可以逐字节拷贝其他类型的数据(C语言要求其处理内存空间地址不重叠的数据)(PS：VS中 已经将其优化得可以处理内存空间地址重叠的数据)

模拟实现`memcpy`

```c
void* my_memcpy(void* dest, const void* src, size_t num)
{
    void* ret = dest;
    assert(dest && src);
    
    while(num--)
    {
        *(char*)dest = *(char*)src;
        dest = (char*)dest + 1;	//上边强制类型转换解引用后, dest 的类型依旧是 void*, 无法直接加加, 所以依旧需要强制类型转换
        src = (char*)src + 1;
    }
    
    return ret; //有返回类型, 必须返回一个值(可忽略此返回值)
}
```

## 5.`memmove`

```c
void * memmove ( void * destination, const void * source, size_t num );
```

作用：同`memcpy`一样，`memmove` 也可以逐字节拷贝其他类型的数据(C语言要求其处理内存空间地址重叠的数据)

模拟实现`memmove`

```c
void* my_memmove(void* dest, const void* src, size_t num)
{
    void* ret = dest;
    assert(dest && src);
    
    if(dest < src)
    {// 从前向后拷贝
        while(num--)
    	{
        	*(char*)dest = *(char*)src;
        	dest = (char*)dest + 1;	//上边强制类型转换解引用后, dest 的类型依旧是 void*, 无法直接加加, 所以依旧需要强制类型转换
        	src = (char*)src + 1;
    	}
    }
    else
    {// 从后向前拷贝
        while(num--)
        	*((char*)dest+num) = *((char*)src+num);
    }
    
    return ret; //有返回类型, 必须返回一个值(可忽略此返回值)
}
```

## 6. `memcmp`

```c
int memcmp ( const void * ptr1, const void * ptr2, size_t num );
```

作用：`strcmp` 是用来比较字符串的，`memcmp` 也可以逐字节比较其他类型的数据

## 7. `memset`

```c
void *memset( void *dest, int c, size_t num);
```

作用：将数组前 `num` 字节，每个字节赋值为 `c`
