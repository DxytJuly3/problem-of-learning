# 红黑树

`AVL树` 是一种 二叉平衡搜索树, 其结构特点可以用一个词来说明：`“绝对平衡”`。因为 `AVL树`的每个节点都完全满足 平衡的要求, 即 `左右子树的高度差不大于1`

`红黑树` 也是一种 二叉平衡搜索树, 但是 其对平衡的控制 并没有像 `AVL树` 那样严格, `红黑树` 关于平衡的限制是：`最长的路径 不大于 最短路径的两倍`

不过, `红黑树` 并`不直接对平衡进行控制`, 而是`通过对满足树的结构` 来`间接控制红黑树的平衡`

## 1. 红黑树的定义

`红黑树`是一种二叉平衡搜索, 所以其实还是 对二叉搜索树进行优化之后 诞生的一种二叉平衡搜索树

`红黑树`之所以被称为`红黑树`, 是因为 其节点拥有颜色标志: `红` 或 黑。并且 节点的颜色在树中遵循以下几个原则：

1. 每个节点, 不是 `红` 就是 黑
2. 树的根节点是 黑 的
3. 如果节点是 `红`, 那么其两个孩子节点是 黑。即 不能存在连续的 `红` 节点
4. 对于每个节点, 从 此节点 到 其所有后代叶子节点 的 所有简单路径上, 黑 节点的数目相等
5. 每个 `空节点` 都是 黑 的, 即 叶子节点的左右孩子可看为 空的 黑 节点 

满足上面所有原则的一棵树 就是 `红黑树`：

<img src="C:\Users\dxyt2\AppData\Roaming\Typora\typora-user-images\image-20221014205150486.png" alt="image-20221014205150486" style="zoom: 80%;" />

> 1. 每个节点, 不是 `红` 就是 黑
>
>     树中只有 `红` 和 黑 两种颜色的节点
>
> 2. 树的根节点是 黑 的
>
> 3. 如果节点是 `红`, 那么其两个孩子节点是 黑。即 不能存在连续的 `红` 节点
>
>     树中, `红` 节点的孩子节点 均为 黑 节点 
>
> 4. 对于每个节点, 从 此节点 到 其所有后代叶子节点 的 所有简单路径上, 黑 节点的数目相等
>
>     例如：
>
>     1. 从根节点开始: 21-`15`-7-`4` 、21-`15`-17 、21-`26`-22 、21-`26`-31-`30` 、21-`26`-31-`38`
>         每个路径中 黑 节点的个数都是 2
>
>     2. 从 15 节点开始：15-7-4 、15-17
>
>         每个路径中 黑 节点的个数都是 1
>
>     3. 从 26 节点开始：`26`-22 、`26`-31-`30` 、`26`-31-`38`
>
>         每个路径中 黑 节点的个数都是 1
>
> 5. 每个 `空节点` 都是 黑 的
>
>     树中左孩子为空、右孩子为空的节点, 其空孩子都可以看作是 黑 节点

满足以上原则, 这棵树就是一个 `红黑树`。

但是 红黑树 是一个较为平衡的二叉搜索树, 只满足这些条件能够保证 `最长路径 不大于 最短路径的两倍` 吗？

答案 当然是可以的

> `只要满足这些条件, 则 树的最长路径 就不会大于 最短路径的二倍`
>
> 为什么？
>
> 1. 树中不能存在连续的 `红` 节点, 即 树中最长的路径一定是 黑-`红`-黑-`红`-黑-`红`······ 一黑一`红` 的情况
> 2. 树中最短的路径, 一定是全 黑 节点
> 3. 每条路径的 黑 节点数目相同, 最长路径一定是 黑`红`相间的路径, 最短的路径一定是 全黑路径
>
> 所以 最长路径 最长也只是 最短路径的二倍
>
> 因为 黑红相间 和 全黑 路径的 黑 节点数目相等

所以 只要满足 `红黑树` 的条件, 就可以达到一定的平衡

---

`红黑树` 的平衡没有 `AVL树` 那么严格, 也就意味着 `红黑树`调节平衡的消耗 要比 `AVL树` 调节平衡的消耗 小得多

## 2. 红黑树的节点

